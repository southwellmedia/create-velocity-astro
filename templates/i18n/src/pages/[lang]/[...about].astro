---
/**
 * About Page (i18n version)
 * URL: /{lang}/about (en), /{lang}/sobre-nosotros (es), /{lang}/a-propos (fr)
 */
import PageLayout from '@/layouts/PageLayout.astro';
import Icon from '@/components/ui/Icon.astro';
import Badge from '@/components/ui/Badge.astro';
import Card from '@/components/ui/Card.astro';
import { Hero } from '@/components/hero';
import { locales, defaultLocale, isValidLocale, type Locale } from '@/i18n/config';
import { useTranslations, routes } from '@/i18n/index';

export function getStaticPaths() {
  const paths = [];

  // Generate paths for non-default locales with their translated slugs
  for (const lang of locales) {
    if (lang === defaultLocale) continue;

    const slug = routes.about[lang];
    paths.push({
      params: { lang, about: slug },
    });
  }

  return paths;
}

const { lang } = Astro.params;

if (!lang || !isValidLocale(lang)) {
  return Astro.redirect('/about');
}

const locale = lang as Locale;
const t = useTranslations(locale);
---

<PageLayout
  title={t('about.meta.title')}
  description={t('about.meta.description')}
  lang={locale}
  routeId="about"
>
  <Hero layout="centered" size="sm" showGrid>
    <Badge slot="badge" pill pulse>{t('about.hero.badge')}</Badge>

    <h1 slot="title">
      {t('about.hero.title')} <span class="text-brand-500">{t('about.hero.titleHighlight')}</span>
    </h1>

    <p slot="description">
      {t('about.hero.description')}
    </p>
  </Hero>

  <!-- Mission Section -->
  <section class="py-20 bg-surface-invert">
    <div class="mx-auto max-w-4xl px-6 text-center">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-on-invert mb-6">
        {t('about.mission.title')}
      </h2>
      <p class="text-lg text-on-invert-secondary max-w-2xl mx-auto leading-relaxed">
        {t('about.mission.description')}
      </p>
    </div>
  </section>

  <!-- Values Section -->
  <section class="py-20">
    <div class="mx-auto max-w-6xl px-6">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-foreground mb-12 text-center">
        {t('about.values.title')}
      </h2>

      <div class="grid gap-8 md:grid-cols-3">
        <!-- Performance -->
        <Card hover>
          <div class="flex items-start gap-4">
            <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-brand-500/20 to-brand-500/5 flex items-center justify-center text-brand-500 shrink-0">
              <Icon name="zap" size="md" />
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-base font-bold text-foreground">{t('about.values.performance.title')}</h3>
              <p class="text-sm text-foreground-muted leading-relaxed mt-1.5">
                {t('about.values.performance.description')}
              </p>
            </div>
          </div>
        </Card>

        <!-- Simplicity -->
        <Card hover>
          <div class="flex items-start gap-4">
            <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-brand-500/20 to-brand-500/5 flex items-center justify-center text-brand-500 shrink-0">
              <Icon name="box" size="md" />
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-base font-bold text-foreground">{t('about.values.simplicity.title')}</h3>
              <p class="text-sm text-foreground-muted leading-relaxed mt-1.5">
                {t('about.values.simplicity.description')}
              </p>
            </div>
          </div>
        </Card>

        <!-- Open Source -->
        <Card hover>
          <div class="flex items-start gap-4">
            <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-brand-500/20 to-brand-500/5 flex items-center justify-center text-brand-500 shrink-0">
              <Icon name="github" size="md" />
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-base font-bold text-foreground">{t('about.values.openSource.title')}</h3>
              <p class="text-sm text-foreground-muted leading-relaxed mt-1.5">
                {t('about.values.openSource.description')}
              </p>
            </div>
          </div>
        </Card>
      </div>
    </div>
  </section>
</PageLayout>
